<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>To-Do List with Timers</title>
  <link rel="icon" href="todo image.jpg" type="image/png">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #3b3356;
      display: flex;
      justify-content: center;
      padding: 50px;
    }

    .todo-container {
      background: rgb(247, 140, 224);
      padding: 40px;
      border-radius: 12px;
      width: 500px;
      box-shadow: 0 5px 15px rgba(12, 10, 17, 0.223);
      position: relative;
    }

    .top-header {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 20px;
      margin-bottom: 15px;
    }

    .completed-counter {
      background: #4a3b72;
      color: white;
      font-weight: bold;
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      white-space: nowrap;
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
      transition: background-color 0.3s ease;
    }

    .completed-counter:hover {
      background: #6f57b7;
    }

    h2 {
      margin: 0;
      user-select: none;
      font-weight: 700;
      font-size: 1.5rem;
    }

    .input-group {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      gap: 6px;
    }

    input[type="text"],
    input[type="number"],
    select {
      padding: 10px;
      border: 2px solid #d8b6b6;
      border-radius: 6px;
      font-size: 14px;
    }

    #taskInput {
      flex: 1.6;
    }

    #timeInput {
      width: 70px;
    }

    #unitSelect {
      width: 65px;
    }

    button {
      padding: 10px 15px;
      background: #0ebd14;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .clear-wrapper {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .clear-btn {
      background: #ff0000;
      font-size: 12px;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
      opacity: 0.85;
      transition: opacity 0.3s ease;
      margin-left: 10px;
    }

    .clear-btn:hover {
      opacity: 1;
    }

    ul {
      list-style-type: none;
      padding: 0;
      margin-top: 20px;
    }

    li {
      background: #b5cfdf;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: filter 0.3s ease;
    }

    li.active {
      filter: brightness(1.2);
    }

    .task-text {
      font-weight: bold;
      cursor: pointer;
      flex: 1;
      user-select: none;
    }

    .timer {
      margin: 0 10px;
      padding: 4px 8px;
      background-color: #3d14c6;
      color: #00ffcc;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      font-size: 14px;
      border: 1px solid #19085f;
      border-radius: 6px;
      box-shadow: 0 0 6px rgba(0, 255, 255, 0.4);
      min-width: 60px;
      text-align: center;
      user-select: none;
      transition: background-color 0.3s;
    }

    .pause-btn {
      background: transparent;
      border: none;
      color: #333;
      font-size: 16px;
      cursor: pointer;
      padding: 0 4px;
      user-select: none;
      transition: color 0.2s;
    }

    .pause-btn:hover {
      color: #000;
    }

    .delete-btn {
      background: transparent;
      border: none;
      color: #900;
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
      padding: 0 6px;
      user-select: none;
    }

    .delete-btn:hover {
      color: #f00;
    }

    .completed-list {
      display: none;
      background-color: #f1e2e2;
      color: #333;
      margin-top: 10px;
      padding: 10px;
      border-radius: 6px;
      font-size: 14px;
      position: relative;
    }

    .completed-list-header {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .completed-list-footer {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div class="todo-container">

    <div class="top-header">
      <div class="completed-counter" onclick="toggleCompletedList()">
        ‚úÖ Completed: <span id="completedCount">0</span>
      </div>
      <h2>üìù Work-Tasks</h2>
    </div>

    <div class="input-group">
      <input type="text" id="taskInput" placeholder="Enter a task" />
      <input type="number" id="timeInput" step="0.1" placeholder="Time" min="0.1" />
      <select id="unitSelect">
        <option value="min">Min</option>
        <option value="hr">Hr</option>
        <option value="sec">Sec</option>
      </select>
      <button onclick="addTask()">Add</button>
    </div>

    <ul id="taskList"></ul>

    <div class="clear-wrapper">
      <button class="clear-btn" onclick="clearAllTasks()">Clear All</button>
    </div>

    <div class="completed-list" id="completedListBox">
      <div class="completed-list-header">Completed Tasks</div>
      <ul id="completedList"></ul>
      <div class="completed-list-footer">
        <button class="clear-btn" onclick="clearAllCompleted()">Clear All Completed</button>
      </div>
    </div>
  </div>

  <script>
    let completedCount = 0;

    function addTask() {
      const taskInput = document.getElementById('taskInput');
      const timeInput = document.getElementById('timeInput');
      const unit = document.getElementById('unitSelect').value;
      const taskText = taskInput.value.trim();
      const timeVal = parseFloat(timeInput.value);

      if (!taskText || isNaN(timeVal) || timeVal <= 0) return;

      let seconds = timeVal;
      if (unit === "min") seconds *= 60;
      if (unit === "hr") seconds *= 3600;

      const li = document.createElement('li');
      li.innerHTML = `
        <span class="task-text">${taskText}</span>
        <span class="timer">${formatTime(Math.round(seconds))}</span>
        <button class="pause-btn" title="Pause or Resume">‚è∏Ô∏è</button>
        <button class="delete-btn" title="Delete task">√ó</button>
      `;

      li.dataset.secondsLeft = Math.round(seconds);
      li.dataset.intervalId = "";
      let paused = false;

      function startCountdown() {
        if (li.dataset.intervalId) return;

        document.querySelectorAll('#taskList li.active').forEach(el => el.classList.remove('active'));
        li.classList.add('active');

        let secs = Number(li.dataset.secondsLeft);
        const timerSpan = li.querySelector(".timer");

        const interval = setInterval(() => {
          secs--;
          li.dataset.secondsLeft = secs;
          timerSpan.textContent = formatTime(secs);

          if (secs <= 0) {
            clearInterval(interval);
            li.dataset.intervalId = "";
            li.classList.remove('active');
            const taskText = li.querySelector(".task-text").textContent;
            li.remove();
            addCompleted(taskText);
            updateTaskNumbers();
          }
        }, 1000);

        li.dataset.intervalId = interval;
        li.querySelector(".pause-btn").textContent = "‚è∏Ô∏è";
        paused = false;
      }

      li.querySelector(".task-text").addEventListener("click", startCountdown);

      li.querySelector(".pause-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        if (!li.dataset.intervalId && !paused) return;

        if (!paused) {
          clearInterval(li.dataset.intervalId);
          li.dataset.intervalId = "";
          li.querySelector(".pause-btn").textContent = "‚ñ∂Ô∏è";
          paused = true;
        } else {
          startCountdown();
        }
      });

      li.querySelector(".delete-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        if (li.dataset.intervalId) {
          clearInterval(li.dataset.intervalId);
        }
        li.remove();
        updateTaskNumbers();
      });

      document.getElementById('taskList').appendChild(li);
      taskInput.value = "";
      timeInput.value = "";
      updateTaskNumbers();
    }

    function formatTime(seconds) {
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      return `${m}:${s < 10 ? '0' + s : s}`;
    }

    function addCompleted(text) {
      completedCount++;
      document.getElementById('completedCount').textContent = completedCount;

      const li = document.createElement('li');
      li.innerHTML = `
        <span class="task-text">${text}</span>
        <button class="delete-btn" title="Delete completed task">√ó</button>
      `;

      li.querySelector(".delete-btn").addEventListener("click", () => {
        li.remove();
        completedCount--;
        document.getElementById('completedCount').textContent = completedCount;
      });

      document.getElementById('completedList').appendChild(li);
    }

    function toggleCompletedList() {
      const box = document.getElementById('completedListBox');
      box.style.display = box.style.display === "none" ? "block" : "none";
    }

    function clearAllTasks() {
      document.getElementById('taskList').innerHTML = "";
    }

    function clearAllCompleted() {
      document.getElementById('completedList').innerHTML = "";
      completedCount = 0;
      document.getElementById('completedCount').textContent = completedCount;
      document.getElementById('completedListBox').style.display = "none";
    }

    function updateTaskNumbers() {
      const tasks = document.querySelectorAll('#taskList .task-text');
      tasks.forEach((task, index) => {
        const raw = task.textContent.replace(/^\d+\.\s/, '');
        task.textContent = `${index + 1}. ${raw}`;
      });
    }

    document.getElementById('taskInput').addEventListener('keypress', e => {
      if (e.key === 'Enter') addTask();
    });

    document.getElementById('timeInput').addEventListener('keypress', e => {
      if (e.key === 'Enter') addTask();
    });
  </script>
</body>
</html>
